<!DOCTYPE html>
<html>
  <head>
    <title>Stripe Checkout Test</title>
    <script src="https://js.stripe.com/v3/"></script>
  </head>
  <body>
    <h1>Stripe Checkout Test</h1>
    <p>Aşağıdaki sessionId ile ödemeyi başlat:</p>
    <input type="text" id="sessionIdInput" placeholder="cs_test_..." style="width: 400px" />
    <button id="checkoutButton">Ödemeye Git</button>

    <script>
      // BURAYA KENDİ PUBLISHABLE KEY'İNİ YAPIŞTIR! (pk_test_... ile başlar)
      const stripe = Stripe(
        "pk_test_51SKPtvPsEZ3dxeZPZ9gsyPtTy1YJfxAGGb4AqMhfbPk4IDO01u3bVOHE3WzTz3KUkObRTuVIIhxAtjcvoK8vbo6F005vKzC7x9"
      );
      const checkoutButton = document.getElementById("checkoutButton");
      const sessionIdInput = document.getElementById("sessionIdInput");

      checkoutButton.addEventListener("click", function () {
        const sessionId = sessionIdInput.value;
        if (!sessionId) {
          alert("Lütfen bir Session ID girin!");
          return;
        }

        stripe
          .redirectToCheckout({
            sessionId: sessionId,
          })
          .then(function (result) {
            // Eğer redirectToCheckout başarısız olursa (nadiren),
            // result.error içinde bir mesaj olur.
            if (result.error) {
              alert(result.error.message);
            }
          })
          .catch(function (error) {
            console.error("Error:", error);
            alert("Bir hata oluştu. Konsolu kontrol edin.");
          });
      });
    </script>
  </body>
</html>
